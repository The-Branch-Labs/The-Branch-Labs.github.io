@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Brand palette (HSL) */
    --raisin-black: 237 22% 17%; /* #212234 */
    --slate-gray: 229 9% 52%;   /* #7a7e90 */
    --lavender-web: 224 42% 88%;/* #d3daed */
    --screamin-green: 126 88% 71%; /* #74f681 */
    --pear: 72 77% 55%;         /* #c0e533 */
    --white: 0 0% 100%;         /* #ffffff */

    /* Design tokens mapped to palette (light) */
    --background: var(--white);
    --foreground: var(--raisin-black);
    --card: var(--white);
    --card-foreground: var(--raisin-black);
    --popover: var(--white);
    --popover-foreground: var(--raisin-black);
    --primary: var(--screamin-green);
    --primary-foreground: var(--raisin-black);
    --secondary: var(--lavender-web);
    --secondary-foreground: var(--raisin-black);
    --muted: var(--lavender-web);
    --muted-foreground: var(--slate-gray);
    --accent: var(--pear);
    --accent-foreground: var(--raisin-black);
    --destructive: 0 84% 60%; /* keep default red for destructive */
    --destructive-foreground: var(--white);
    --border: var(--lavender-web);
    --input: var(--lavender-web);
    --ring: var(--screamin-green);
    --radius: 0.5rem;
    /* Footer variables mapped to design tokens */
    --ifm-footer-background-color: hsl(var(--background));
    --ifm-footer-color: hsl(var(--muted-foreground));
    --ifm-footer-link-color: hsl(var(--foreground));
    --ifm-footer-link-hover-color: hsl(var(--primary));
    --ifm-footer-title-color: hsl(var(--foreground));
    --ifm-footer-padding-vertical: 3rem;
    --ifm-footer-padding-horizontal: 0;
    /* Docusaurus primary color derived from tokens */
    --ifm-color-primary: hsl(var(--primary));
    --ifm-color-primary-dark: hsl(var(--primary));
    --ifm-color-primary-darker: hsl(var(--primary));
    --ifm-color-primary-darkest: hsl(var(--primary));
    --ifm-color-primary-light: hsl(var(--primary));
    --ifm-color-primary-lighter: hsl(var(--primary));
    --ifm-color-primary-lightest: hsl(var(--primary));

    /* Constrain navbar logo size */
    --ifm-navbar-logo-height: 28px;
  }

  [data-theme='dark'] {
    /* Design tokens mapped to palette (dark) */
    --background: var(--raisin-black);
    --foreground: var(--white);
    --card: var(--raisin-black);
    --card-foreground: var(--white);
    --popover: var(--raisin-black);
    --popover-foreground: var(--white);
    --primary: var(--screamin-green);
    --primary-foreground: var(--raisin-black);
    --secondary: var(--slate-gray);
    --secondary-foreground: var(--white);
    --muted: var(--slate-gray);
    --muted-foreground: var(--lavender-web);
    --accent: var(--pear);
    --accent-foreground: var(--raisin-black);
    --destructive: 0 63% 31%;
    --destructive-foreground: var(--white);
    --border: var(--slate-gray);
    --input: var(--slate-gray);
    --ring: var(--screamin-green);
    /* Footer variables for dark theme */
    --ifm-footer-background-color: hsl(var(--background));
    --ifm-footer-color: hsl(var(--muted-foreground));
    --ifm-footer-link-color: hsl(var(--foreground));
    --ifm-footer-link-hover-color: hsl(var(--primary));
    --ifm-footer-title-color: hsl(var(--foreground));

    /* Docusaurus primary (dark) */
    --ifm-color-primary: hsl(var(--primary));
    --ifm-color-primary-dark: hsl(var(--primary));
    --ifm-color-primary-darker: hsl(var(--primary));
    --ifm-color-primary-darkest: hsl(var(--primary));
    --ifm-color-primary-light: hsl(var(--primary));
    --ifm-color-primary-lighter: hsl(var(--primary));
    --ifm-color-primary-lightest: hsl(var(--primary));
  }
}

/* Responsive logo sizing for the header */
@media (max-width: 996px) {
  :root { --ifm-navbar-logo-height: 24px; }
}

/* Ensure the logo respects the height and keeps aspect ratio */
.navbar__logo,
.navbar__logo img,
.navbar__logo svg {
  height: var(--ifm-navbar-logo-height);
  width: auto;
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
  html {
    @apply bg-background;
  }
  html, body {
    min-height: 100%;
  }
  /* Align Docusaurus background/text variables to our tokens */
  :root {
    --ifm-background-color: hsl(var(--background));
    --ifm-background-surface-color: hsl(var(--background));
    --ifm-font-color-base: hsl(var(--foreground));
    --ifm-color-content: hsl(var(--foreground));
  }
  html[data-theme='dark'] {
    --ifm-background-color: hsl(var(--background));
    --ifm-background-surface-color: hsl(var(--background));
    --ifm-font-color-base: hsl(var(--foreground));
    --ifm-color-content: hsl(var(--foreground));
  }
}

/* Typography for Markdown/MDX content (docs + blog)
   The Typography plugin generates `.markdown ...` selectors.
*/
@layer components {
  /* Footer aligned with Tailwind tokens and site style */
  .footer {
    @apply bg-background text-muted-foreground border-t border-border;
  }
  .footer__title {
    @apply text-foreground font-semibold;
  }
  .footer__link-item {
    @apply text-foreground hover:text-primary;
  }

  /* Full width by default and align Docusaurus heading vars to our scale */
  .markdown {
    max-width: none;
    /* Map IFM heading sizes to Tailwind scale */
    --ifm-h1-font-size: 2.25rem; /* ~text-4xl */
    --ifm-h2-font-size: 1.875rem; /* ~text-3xl */
    --ifm-h3-font-size: 1.5rem; /* ~text-2xl */
    --ifm-heading-font-weight: 600; /* font-semibold */
    --ifm-heading-line-height: 1.2;

    /* Harmonize Typography plugin colors with our design tokens */
    --tw-prose-body: hsl(var(--foreground));
    --tw-prose-headings: hsl(var(--foreground));
    --tw-prose-lead: hsl(var(--muted-foreground));
    --tw-prose-links: hsl(var(--primary));
    --tw-prose-bold: hsl(var(--foreground));
    --tw-prose-counters: hsl(var(--muted-foreground));
    --tw-prose-bullets: hsl(var(--muted-foreground));
    --tw-prose-hr: hsl(var(--border));
    --tw-prose-quotes: hsl(var(--foreground));
    --tw-prose-quote-borders: hsl(var(--border));
    --tw-prose-captions: hsl(var(--muted-foreground));
    --tw-prose-code: hsl(var(--foreground));
    --tw-prose-pre-code: hsl(var(--foreground));
    --tw-prose-pre-bg: transparent;
    --tw-prose-th-borders: hsl(var(--border));
    --tw-prose-td-borders: hsl(var(--border));
  }

  /* Keep code blocks consistent with Prism theme */
  .markdown :where(pre):not(:where([class~="not-prose"] *)) {
    @apply bg-transparent;
  }

  /* Narrower reading width for blog posts */
  .theme-blog .markdown {
    max-width: 70ch;
    margin-left: auto;
    margin-right: auto;
  }

  /* Ensure clear heading hierarchy regardless of theme order */
  .markdown h1 { @apply text-4xl font-semibold tracking-tight; display: flex; align-items: center; margin-top: 0; }
  .markdown h2 { @apply text-3xl font-semibold tracking-tight mt-8; display: flex; align-items: center; margin-top: 0; }
  .markdown h3 { @apply text-2xl font-semibold tracking-tight mt-6; display: flex; align-items: center; margin-top: 0; }

  /* Keep inline links inline inside Markdown content */
  .markdown a { display: inline; }
}

.breadcrumbs {
  display: flex;
  align-items: center;
}

.breadcrumbs__item {
  display: flex;
  align-items: center;
  height: 100%;
}

a {
  display: flex;
  align-items: center;
  flex-direction: row;
}


h1 a { @apply text-4xl font-semibold tracking-tight; margin-top: 0; }
h2 a { @apply text-3xl font-semibold tracking-tight mt-8; margin-top: 0; }
h3 a { @apply text-2xl font-semibold tracking-tight mt-6; margin-top: 0; }

header h1 { @apply text-4xl font-semibold tracking-tight; }
header h2 { @apply text-3xl font-semibold tracking-tight mt-8; }
header h3 { @apply text-2xl font-semibold tracking-tight mt-6; }

time { @apply text-sm text-muted-foreground; }
